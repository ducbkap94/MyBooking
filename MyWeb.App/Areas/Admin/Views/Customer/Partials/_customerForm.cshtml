@model MyWeb.Business.Dtos.Customer.Response.CustomerResponse

<!-- Modal -->

                <form id="customerForm" method="post">

                    <div class="form-group">
                        <label>Họ và tên</label>
                        <input type="text" id="Name" name="Name" value="@Model?.Name" class="form-control" />
                        <input type="hidden"  name="Id" id="Id" value="@Model?.Id" />
                    </div>
                    <div class="form-group">
                        <label>Căn cước công dân</label>
                        <input type="number" id="IdentityCard" name="IdentityCard" value="@Model?.IdentityCard" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email"   id="Email" name="Email" value='@Model?.Email' class="form-control" />
                    </div>
                    <div class="form-group">
                        <label>Số điện thoại</label>
                        <input type="number" id="Phone" name="Phone" value="@Model?.Phone" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label>Địa chỉ</label>
                        <input type="text" id="Address" name="Address" value="@Model?.Address" class="form-control" />
                    </div>
                    
                    

                    <button type="submit" class="btn btn-primary">Lưu</button>
                </form>

<script>


        const validation = new JustValidate('#customerForm');
        window.assetFormValidation = validation;

        validation
             .addField('[name="Name"]', [
            { rule: 'required', errorMessage: 'Họ và tên không được để trống' },
            { rule: 'minLength', value: 3, errorMessage: 'Ít nhất 3 ký tự' }
        ])
        .addField('[name="Phone"]', [
            { rule: 'required', errorMessage: 'Số điện thoại không được để trống' },
            { rule: 'minLength', value: 10, errorMessage: 'Ít nhất 10 ký tự' },
            { rule: 'maxLength', value: 11, errorMessage: 'Không quá 11 ký tự' },
            { rule: 'number', errorMessage: 'Số điện thoại không hợp lệ' }
        ]).addField('[name="Email"]', [
            { rule: 'required', errorMessage: 'Email không được để trống' },
            { rule: 'email', errorMessage: 'Email không hợp lệ' }
        ]).addField('[name="IdentityCard"]', [
            { rule: 'required', errorMessage: 'Căn cước công dân không được để trống' },
            { rule: 'minLength', value: 9, errorMessage: 'Ít nhất 9 ký tự' },
            { rule: 'maxLength', value: 12, errorMessage: 'Không quá 12 ký tự' },
            { rule: 'number', errorMessage: 'Căn cước công dân không hợp lệ' }
        ]).addField('[name="Address"]', [
            { rule: 'required', errorMessage: 'Địa chỉ không được để trống' },
        ])

        .onSuccess((event) => {
            event.preventDefault();
            const form = document.querySelector('#customerForm');
            const formData = new FormData(form);

            fetch('/Admin/Customer/Save', {
                method: 'POST',
                body: formData
            }) .then(response => response.json())
                .then(data => {
                    if (!data.success) {
                        alert(data.message);
                        return;
                    }
                    alert(data.message);
                    window.location.reload();
                })              
                .catch(error => {
                    console.error('Lỗi:', error);
                    alert(data.message);
                });
        });
</script>